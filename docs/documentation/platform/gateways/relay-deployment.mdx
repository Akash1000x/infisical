---
title: "Relay Deployment"
description: "How to deploy Infisical Relay Servers"
---

Infisical Relay is a secure routing layer that allows Infisical to connect to your private network resources, such as databases or internal APIs, without exposing them to the public internet.
The relay acts as an intermediary, forwarding encrypted traffic between Infisical and your deployed gateways. This ensures that your sensitive data remains protected and never leaves your network unencrypted.
With this architecture, you can achieve secure, firewall-friendly access across network boundaries, making it possible for Infisical to interact with resources even in highly restricted environments.

Before diving in, it's important to determine whether you actually need to deploy your own relay server or if you can use Infisical's managed infrastructure.

## Do You Need to Deploy a Relay?

Not all users need to deploy their own relay servers. Infisical provides managed relay infrastructure in US/EU regions for Infisical Cloud users, which requires no setup or maintenance. You only need to deploy a relay if you:

- Are self-hosting Infisical
- Have a dedicated Infisical instance (managed by Infisical)
- Require dedicated relays for your organization (for compliance, custom network policies, or regional proximity)
- Need full control over relay infrastructure and traffic routing

If you are using Infisical Cloud and do not have specific requirements, you can use the managed relays provided by Infisical and skip the rest of this guide.

## Deployment Steps

To successfully deploy an Infisical Relay for use, follow these steps in order.

<Steps>
  <Step title="Prepare Your Environment">
    Before deploying your relay server, ensure you have:
    
    - A server with a static IP address or DNS
    - Administrative access to configure firewall rules
    - Access to create machine identities in your Infisical organization
    - The Infisical CLI installed on your deployment environment
    
  </Step>

   <Step title="Provision a Machine Identity">
   Create a machine identity with the appropriate permissions for your relay:
   
   1. **Create a machine identity** in your Infisical organization with permissions to create and manage relays.

   2. **Choose an authentication method** from the supported [machine identity auth methods](/documentation/platform/identities/machine-identities)

   3. **Configure environment variables** corresponding to your chosen authentication method when deploying the relay The relay will use this machine identity to authenticate with Infisical and register itself within your organization.
   
   </Step>

   <Step title="Install the Infisical CLI">
    Make sure the Infisical CLI is installed on the server where you plan to deploy the relay. The CLI is required for relay installation and management.

    See the [CLI Installation Guide](/cli/overview) for instructions.

   </Step>

   <Step title="Configure Network & Firewall">
    Ensure your network and firewall settings allow the server to accept inbound connections and make outbound connections:

    **Inbound Connections:**
    | Protocol | Source             | Port | Purpose                          |
    | -------- | ------------------ | ---- | -------------------------------- |
    | TCP      | Gateways           | 2222 | SSH reverse tunnel establishment |
    | TCP      | Infisical instance host (US/EU, other) | 8443 | Platform-to-relay communication  |

    **Outbound Connections:**
    | Protocol | Destination                          | Port | Purpose                                    |
    | -------- | ------------------------------------ | ---- | ------------------------------------------ |
    | TCP      | Infisical instance host (US/EU, other) | 443  | API communication and certificate requests |

  </Step>

   <Step title="Select a Deployment Method">
      The Infisical CLI is used to install and start the relay in your chosen environment. The CLI provides commands for both production and development scenarios, and supports a variety of options/flags to configure your deployment.

      To view all available flags and equivalent environment variables for relay deployment, see the [Relay CLI Command Reference](/cli/commands/relay).
    <Tabs>
       <Tab title="Linux Server">
          For production deployments on Linux servers, install the Relay as a systemd service. This installation method only supports [Token Auth](/documentation/platform/identities/token-auth).

          ```bash
          sudo infisical relay systemd install \
             --token <your-machine-identity-token> \
             --name <relay-name> \
             --domain <your-infisical-domain> \
             --host <static-ip-or-dns-of-server>

          # Start the relay service
          sudo systemctl start infisical-relay
          sudo systemctl enable infisical-relay
          ```

          <Warning>
            The systemd install command requires a Linux operating system with root/sudo privileges.
          </Warning>
       </Tab>

       <Tab title="Manual Start">
          For non-Linux systems or when you need more control over the relay process:

          ```bash
          infisical relay start \
             --type=<type> \
             --host=<host> \
             --name=<name> \
             --auth-method=<auth-method>
          ```

          This method supports all [machine identity auth methods](/documentation/platform/identities/machine-identities) and runs in the foreground. Suitable for production use on non-Linux systems or development environments.
       </Tab>
    </Tabs>

   </Step>

</Steps>

## Frequently Asked Questions

<Accordion title="Can the relay servers decrypt traffic going through them?">
No, relay servers cannot decrypt any traffic passing through them due to end-to-end encryption:

- **Client-to-Gateway mTLS (via TLS-pinned tunnel)**: Clients connect via a proxy that establishes a TLS-pinned tunnel to the gateway; mTLS between the client and gateway is negotiated inside this tunnel, encrypting all application traffic
- **SSH tunnel encryption**: The mTLS-encrypted traffic is then transmitted through SSH reverse tunnels to relay servers
- **Double encryption**: Traffic is encrypted twice - once by client mTLS and again by SSH tunnels
- **Relay only routes traffic**: The relay server only routes the doubly-encrypted traffic without access to either encryption layer

The relay infrastructure is designed as a secure routing mechanism where only the client and gateway can decrypt the actual application traffic.

</Accordion>

<Accordion title="What are the benefits of deploying my own relay?">
Deploying your own relay provides several advantages:

- **Dedicated resources**: Full control over relay infrastructure and performance
- **Lower latency**: Deploy closer to your gateways for optimal performance
- **Compliance**: Meet specific data routing and compliance requirements
- **Custom network policies**: Implement organization-specific network configurations
- **Geographic proximity**: Reduce network congestion and improve response times
- **High availability**: Deploy multiple relays for redundancy and load distribution

Organization-deployed relays give you complete control over your secure communication infrastructure.

</Accordion>

<Accordion title="How do I troubleshoot connectivity issues?">
For detailed troubleshooting:

**Platform cannot connect to relay:**

- Check firewall rules allow inbound TCP with TLS on port 8443
- Test connectivity: `openssl s_client -connect <relay-ip>:8443`

**Test network connectivity:**

```bash
# Test outbound API access from relay
curl -I https://app.infisical.com

# Test TCP with TLS port from platform
openssl s_client -connect <relay-ip>:8443
```

</Accordion>

<Accordion title="What happens if my relay server goes down?">
Relay server outages affect gateway connectivity:

- **Gateway reconnection**: Gateways will automatically attempt to reconnect when the relay comes back online
- **Service interruption**: While the relay is down, the Infisical platform cannot reach gateways through that relay
- **Multiple relays**: Deploy multiple relay servers for redundancy and high availability
- **Monitoring**: Set up monitoring to detect relay outages quickly
- **Automatic restart**: Use systemd or container orchestration to automatically restart failed relay services

For production environments, consider deploying multiple relay servers to avoid single points of failure.

</Accordion>
